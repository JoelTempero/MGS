<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGS Admin Portal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg viewBox="0 0 100 100" class="crest-icon">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="2"/>
                        <path d="M50 15 L50 85 M25 50 L75 50" stroke="currentColor" stroke-width="3"/>
                    </svg>
                </div>
                <div class="sidebar-brand">
                    <h1>MGS Admin</h1>
                    <span>Management Portal</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-section">Main</li>
                    <li>
                        <a href="#" class="nav-link active" data-section="dashboard">
                            <i class="fas fa-th-large"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="alerts">
                            <i class="fas fa-bell"></i>
                            <span>Alerts</span>
                            <span class="nav-badge">4</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="newsletters">
                            <i class="fas fa-newspaper"></i>
                            <span>Newsletters</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="notices">
                            <i class="fas fa-bullhorn"></i>
                            <span>Daily Notices</span>
                        </a>
                    </li>
                    
                    <li class="nav-section">Content</li>
                    <li>
                        <a href="#" class="nav-link" data-section="push-notifications">
                            <i class="fas fa-paper-plane"></i>
                            <span>Push Notifications</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="contacts">
                            <i class="fas fa-address-book"></i>
                            <span>Contacts</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="links">
                            <i class="fas fa-link"></i>
                            <span>Quick Links</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="term-dates">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Term Dates</span>
                        </a>
                    </li>
                    
                    <li class="nav-section">System</li>
                    <li>
                        <a href="#" class="nav-link" data-section="subscribers">
                            <i class="fas fa-users"></i>
                            <span>Subscribers</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <a href="../index.html" class="back-to-app">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back to App</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="header-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search...">
                </div>
                
                <div class="header-actions">
                    <button class="header-btn notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">U</div>
                        <div class="user-info">
                            <span class="user-name">Admin User</span>
                            <span class="user-role">Administrator</span>
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Section -->
                <section class="section active" id="section-dashboard">
                    <div class="section-header">
                        <h2>Dashboard</h2>
                        <p>Welcome back! Here's what's happening with your school app.</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon alerts">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-value">4</span>
                                <span class="stat-label">Active Alerts</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon subscribers">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-value">1,247</span>
                                <span class="stat-label">Subscribers</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon newsletters">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-value">12</span>
                                <span class="stat-label">Newsletters</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon notices">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-value">28</span>
                                <span class="stat-label">Notices This Week</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-grid">
                        <div class="dashboard-card recent-alerts">
                            <div class="card-header">
                                <h3>Recent Alerts</h3>
                                <a href="#" class="view-all" data-section="alerts">View All</a>
                            </div>
                            <div class="card-content" id="dashboardAlerts">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                        
                        <div class="dashboard-card quick-actions">
                            <div class="card-header">
                                <h3>Quick Actions</h3>
                            </div>
                            <div class="card-content">
                                <button class="quick-action-btn" data-action="new-alert">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>New Alert</span>
                                </button>
                                <button class="quick-action-btn" data-action="new-newsletter">
                                    <i class="fas fa-file-upload"></i>
                                    <span>Upload Newsletter</span>
                                </button>
                                <button class="quick-action-btn" data-action="new-notice">
                                    <i class="fas fa-edit"></i>
                                    <span>Add Notice</span>
                                </button>
                                <button class="quick-action-btn" data-action="send-notification">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>Send Push Notification</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="dashboard-card subscriber-stats">
                            <div class="card-header">
                                <h3>Subscriber Distribution</h3>
                            </div>
                            <div class="card-content">
                                <div class="subscriber-chart">
                                    <div class="chart-bar">
                                        <div class="bar-fill" style="height: 85%"></div>
                                        <span class="bar-label">Primary</span>
                                        <span class="bar-value">432</span>
                                    </div>
                                    <div class="chart-bar">
                                        <div class="bar-fill" style="height: 65%"></div>
                                        <span class="bar-label">Middle</span>
                                        <span class="bar-value">298</span>
                                    </div>
                                    <div class="chart-bar">
                                        <div class="bar-fill" style="height: 55%"></div>
                                        <span class="bar-label">Senior</span>
                                        <span class="bar-value">245</span>
                                    </div>
                                    <div class="chart-bar">
                                        <div class="bar-fill" style="height: 70%"></div>
                                        <span class="bar-label">Sport</span>
                                        <span class="bar-value">312</span>
                                    </div>
                                    <div class="chart-bar">
                                        <div class="bar-fill" style="height: 40%"></div>
                                        <span class="bar-label">Arts</span>
                                        <span class="bar-value">187</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Alerts Section -->
                <section class="section" id="section-alerts">
                    <div class="section-header">
                        <div>
                            <h2>Alerts Management</h2>
                            <p>Create and manage school alerts</p>
                        </div>
                        <button class="btn btn-primary" id="newAlertBtn">
                            <i class="fas fa-plus"></i> New Alert
                        </button>
                    </div>
                    
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Type</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="alertsTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Newsletters Section -->
                <section class="section" id="section-newsletters">
                    <div class="section-header">
                        <div>
                            <h2>Newsletters</h2>
                            <p>Upload and manage school newsletters</p>
                        </div>
                        <button class="btn btn-primary" id="newNewsletterBtn">
                            <i class="fas fa-upload"></i> Upload Newsletter
                        </button>
                    </div>
                    
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Category</th>
                                    <th>Date</th>
                                    <th>Downloads</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="newslettersTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Notices Section -->
                <section class="section" id="section-notices">
                    <div class="section-header">
                        <div>
                            <h2>Daily Notices</h2>
                            <p>Create and manage daily notices</p>
                        </div>
                        <button class="btn btn-primary" id="newNoticeBtn">
                            <i class="fas fa-plus"></i> New Notice
                        </button>
                    </div>
                    
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Category</th>
                                    <th>Author</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="noticesTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Contacts Section -->
                <section class="section" id="section-contacts">
                    <div class="section-header">
                        <div>
                            <h2>Contacts</h2>
                            <p>Manage school contact directory</p>
                        </div>
                        <button class="btn btn-primary" id="newContactBtn">
                            <i class="fas fa-plus"></i> Add Contact
                        </button>
                    </div>
                    
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Phone</th>
                                    <th>Email</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="contactsTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Links Section -->
                <section class="section" id="section-links">
                    <div class="section-header">
                        <div>
                            <h2>Quick Links</h2>
                            <p>Manage quick links displayed in the app</p>
                        </div>
                        <button class="btn btn-primary" id="newLinkBtn">
                            <i class="fas fa-plus"></i> Add Link
                        </button>
                    </div>
                    
                    <div class="links-grid" id="linksAdminGrid">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Term Dates Section -->
                <section class="section" id="section-term-dates">
                    <div class="section-header">
                        <div>
                            <h2>Term Dates</h2>
                            <p>Manage school term dates</p>
                        </div>
                        <button class="btn btn-primary" id="editTermDatesBtn">
                            <i class="fas fa-edit"></i> Edit Term Dates
                        </button>
                    </div>
                    
                    <div class="term-dates-admin" id="termDatesAdmin">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Push Notifications Section -->
                <section class="section" id="section-push-notifications">
                    <div class="section-header">
                        <div>
                            <h2>Send Push Notification</h2>
                            <p>Send instant notifications to subscribed devices</p>
                        </div>
                    </div>
                    
                    <div class="push-form-container">
                        <form id="pushNotificationForm" class="push-form">
                            <div class="form-group">
                                <label>Notification Type</label>
                                <div class="type-selector">
                                    <label class="type-option">
                                        <input type="radio" name="notificationType" value="general" checked>
                                        <div class="type-card">
                                            <i class="fas fa-bell"></i>
                                            <span>General</span>
                                        </div>
                                    </label>
                                    <label class="type-option">
                                        <input type="radio" name="notificationType" value="emergency">
                                        <div class="type-card emergency">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <span>Emergency</span>
                                        </div>
                                    </label>
                                    <label class="type-option">
                                        <input type="radio" name="notificationType" value="sport">
                                        <div class="type-card sport">
                                            <i class="fas fa-running"></i>
                                            <span>Sport</span>
                                        </div>
                                    </label>
                                    <label class="type-option">
                                        <input type="radio" name="notificationType" value="performing-arts">
                                        <div class="type-card arts">
                                            <i class="fas fa-music"></i>
                                            <span>Arts</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="pushTopic">Send To</label>
                                <select id="pushTopic" required>
                                    <option value="">Select audience...</option>
                                    <option value="general">ðŸ“¢ All Subscribers (General)</option>
                                    <option value="emergency">ðŸš¨ Emergency (All Devices)</option>
                                    <option value="primary">ðŸŽ’ Primary School</option>
                                    <option value="middle">ðŸ“š Middle School</option>
                                    <option value="senior">ðŸŽ“ Senior College</option>
                                    <option value="sport">âš½ Sport Subscribers</option>
                                    <option value="performing-arts">ðŸŽ­ Performing Arts</option>
                                    <option value="production">ðŸŽ¬ School Production</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="pushTitle">Title</label>
                                <input type="text" id="pushTitle" placeholder="e.g., School Closure Tomorrow" required maxlength="100">
                                <span class="char-count"><span id="titleCount">0</span>/100</span>
                            </div>
                            
                            <div class="form-group">
                                <label for="pushBody">Message</label>
                                <textarea id="pushBody" rows="3" placeholder="Enter your notification message..." required maxlength="500"></textarea>
                                <span class="char-count"><span id="bodyCount">0</span>/500</span>
                            </div>
                            
                            <div class="push-preview">
                                <h4>Preview</h4>
                                <div class="notification-preview">
                                    <div class="preview-icon">
                                        <img src="../icons/icon-72.png" alt="MGS" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22 fill=%22%23005a5a%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2230%22>M</text></svg>'">
                                    </div>
                                    <div class="preview-content">
                                        <div class="preview-title" id="previewTitle">Notification Title</div>
                                        <div class="preview-body" id="previewBody">Your message will appear here...</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" onclick="clearPushForm()">
                                    <i class="fas fa-times"></i> Clear
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-paper-plane"></i> Send Notification
                                </button>
                            </div>
                        </form>
                        
                        <div class="push-info">
                            <h4><i class="fas fa-info-circle"></i> How it works</h4>
                            <ul>
                                <li>Notifications are sent instantly to all devices subscribed to the selected topic</li>
                                <li>Emergency notifications go to ALL devices and cannot be unsubscribed</li>
                                <li>Parents choose their subscription preferences in the app</li>
                                <li>Notifications appear even when the app is closed</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="section-header" style="margin-top: 2rem;">
                        <div>
                            <h3>Recent Notifications</h3>
                            <p>History of sent notifications</p>
                        </div>
                    </div>
                    <div class="push-history" id="pushHistory">
                        <div class="history-item">
                            <div class="history-icon general"><i class="fas fa-bell"></i></div>
                            <div class="history-content">
                                <strong>Welcome to Term 1</strong>
                                <p>Welcome back! We're excited to start the new school year...</p>
                                <span class="history-meta">General â€¢ 2 days ago â€¢ 1,234 delivered</span>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-icon sport"><i class="fas fa-running"></i></div>
                            <div class="history-content">
                                <strong>Swimming Sports Postponed</strong>
                                <p>Due to weather conditions, swimming sports moved to Friday...</p>
                                <span class="history-meta">Sport â€¢ 3 days ago â€¢ 456 delivered</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Subscribers Section -->
                <section class="section" id="section-subscribers">
                    <div class="section-header">
                        <div>
                            <h2>Subscribers</h2>
                            <p>View and manage app subscribers</p>
                        </div>
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                    </div>
                    
                    <div class="subscriber-filters">
                        <select class="filter-select">
                            <option value="all">All Categories</option>
                            <option value="primary">Primary School</option>
                            <option value="middle">Middle School</option>
                            <option value="senior">Senior College</option>
                            <option value="sport">Sport</option>
                            <option value="arts">Performing Arts</option>
                        </select>
                    </div>
                    
                    <div class="subscriber-summary">
                        <p>This section would display subscriber data from Firebase in production.</p>
                        <div class="demo-note">
                            <i class="fas fa-info-circle"></i>
                            <span>Demo mode - subscriber management requires Firebase integration</span>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section class="section" id="section-settings">
                    <div class="section-header">
                        <h2>Settings</h2>
                        <p>Configure app settings and preferences</p>
                    </div>
                    
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3><i class="fas fa-palette"></i> Appearance</h3>
                            <div class="setting-row">
                                <span>School Name</span>
                                <input type="text" value="Middleton Grange School" class="setting-input">
                            </div>
                            <div class="setting-row">
                                <span>Daily Verse</span>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3><i class="fas fa-bell"></i> Notifications</h3>
                            <div class="setting-row">
                                <span>Push Notifications</span>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <span>Email Notifications</span>
                                <label class="toggle">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3><i class="fas fa-database"></i> Data</h3>
                            <div class="setting-row">
                                <span>Firebase Project ID</span>
                                <input type="text" value="mgs-connect-demo" class="setting-input" disabled>
                            </div>
                            <button class="btn btn-outline btn-sm">
                                <i class="fas fa-sync"></i> Test Connection
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Modal Title</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="btn btn-outline" id="modalCancel">Cancel</button>
                <button class="btn btn-primary" id="modalSave">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="admin.js"></script>
</body>
</html>
